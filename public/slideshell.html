<!DOCTYPE html>
<html>
    <head>
        <title>Presentation</title>
        <link rel="stylesheet" href="/stylesheets/slide.css">
        <link rel="stylesheet" href="/highlight/highlight.css" />
        <script src="/highlight/highlight.js"></script>

    </head>

    <body class=slidecontent>
    </body>

        <script>

document.body.addEventListener('keydown', (evt) => {
    if (evt.ctrlKey || evt.metaKey || evt.altKey) {
        return;
    }

    const code = evt.which;

    const forwards = [
        32, // space
        74, // j
        39, // right
        40, // down
        34 // pgdn
    ];
    const backs = [
        75, // k
        8, // backspace
        37, // left
        38, // up
        33 // pgup
    ];

    if (forwards.indexOf(code) >= 0) {
        evt.stopPropagation();
        evt.preventDefault();

        window.opener.moveNext();
    }
    else if (backs.indexOf(code) >= 0) {
        evt.stopPropagation();
        evt.preventDefault();

        window.opener.movePrev();
    }
});

function adjustHeight() {
    const winHeight = window.innerHeight;
    const slide = document.body;
    const slideHeight = slide.offsetHeight;

    const excess = (slideHeight + 1) - winHeight;
    const leeway = 10;

    if (excess <= leeway) {
        return;
    }

    const pres = [...slide.querySelectorAll('pre')];

    const largest = pres.reduce((prevLargest, pre) => {
        return (pre.offsetHeight > prevLargest.offsetHeight) ? pre : prevLargest;
    });

    let newHeight = largest.offsetHeight - excess;
    newHeight = Math.max(newHeight, 100);
    if (newHeight < largest.offsetHeight) {
        largest.style.height = `${newHeight}px`;
    }
}

        </script>
        </html>